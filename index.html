<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema Food Truck - Gestão Completa</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <!-- Header -->
  <header>
    <h1>🚚 <span>Food Truck</span> System</h1>
  </header>

  <!-- Navigation -->
  <nav>
    <ul>
      <li><a href="#dashboard" class="nav-link active" data-section="dashboard">📊 Dashboard</a></li>
      <li><a href="#atendentes" class="nav-link" data-section="atendentes">👥 Atendentes</a></li>
      <li><a href="#produtos" class="nav-link" data-section="produtos">🍔 Produtos</a></li>
      <li><a href="#mesas" class="nav-link" data-section="mesas">🪑 Mesas</a></li>
      <li><a href="#pedidos" class="nav-link" data-section="pedidos">📝 Pedidos</a></li>
      <li><a href="#vendas" class="nav-link" data-section="vendas">💰 Vendas</a></li>
    </ul>
  </nav>

  <!-- Container -->
  <div class="container">
    <!-- Alert Container -->
    <div id="alertContainer"></div>

    <!-- Dashboard Section -->
    <section id="dashboard" class="section active">
      <div class="card">
        <h2>📊 Dashboard - Relatórios e Análises</h2>
        
        <div class="dashboard-grid">
          <div class="stat-card">
            <h3>Quantidade de Vendas</h3>
            <div class="stat-value" id="statVendas">-</div>
          </div>
          <div class="stat-card">
            <h3>Faturamento Total</h3>
            <div class="stat-value" id="statFaturamento">R$ -</div>
          </div>
          <div class="stat-card">
            <h3>Ticket Médio</h3>
            <div class="stat-value" id="statTicket">R$ -</div>
          </div>
        </div>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(500px, 1fr)); gap: 2rem;">
          <div class="card">
            <h3 style="color: var(--primary-red);">Faturamento por Dia</h3>
            <canvas id="chartVendasDia"></canvas>
          </div>

          <div class="card">
            <h3 style="color: var(--primary-red);">Vendas por Pagamento</h3>
            <canvas id="chartPagamento"></canvas>
          </div>
        </div>
      </div>
    </section>

    <!-- Atendentes Section -->
    <section id="atendentes" class="section">
      <div class="card">
        <h2>👥 Gerenciamento de Atendentes</h2>
        
        <div class="btn-group">
          <button class="btn btn-primary" onclick="openAtendenteModal()">➕ Novo Atendente</button>
          <button class="btn btn-secondary" onclick="loadAtendentes()">🔄 Atualizar Lista</button>
        </div>

        <div class="loading" id="loadingAtendentes">
          <div class="spinner"></div>
          Carregando atendentes...
        </div>

        <div class="table-container">
          <table id="atendenteTable">
            <thead>
              <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>CPF</th>
                <th>Telefone</th>
                <th>Login</th>
                <th>Tipo</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody id="atendenteTableBody">
              <!-- Dados carregados via JS -->
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Produtos Section -->
    <section id="produtos" class="section">
      <div class="card">
        <h2>🍔 Gerenciamento de Produtos</h2>
        
        <div class="btn-group">
          <button class="btn btn-primary" onclick="openProdutoModal()">➕ Novo Produto</button>
          <button class="btn btn-secondary" onclick="loadProdutos()">🔄 Atualizar Lista</button>
        </div>

        <div class="loading" id="loadingProdutos">
          <div class="spinner"></div>
          Carregando produtos...
        </div>

        <div class="table-container">
          <table id="produtoTable">
            <thead>
              <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>Categoria</th>
                <th>Preço</th>
                <th>Estoque</th>
                <th>Status</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody id="produtoTableBody">
              <!-- Dados carregados via JS -->
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Mesas Section -->
    <section id="mesas" class="section">
      <div class="card">
        <h2>🪑 Gerenciamento de Mesas</h2>
        
        <div class="btn-group">
          <button class="btn btn-primary" onclick="openMesaModal()">➕ Nova Mesa</button>
          <button class="btn btn-secondary" onclick="loadMesas()">🔄 Atualizar Lista</button>
        </div>

        <div class="loading" id="loadingMesas">
          <div class="spinner"></div>
          Carregando mesas...
        </div>

        <div class="table-container">
          <table id="mesaTable">
            <thead>
              <tr>
                <th>ID</th>
                <th>Número da Mesa</th>
                <th>Status</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody id="mesaTableBody">
              <!-- Dados carregados via JS -->
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Pedidos Section -->
    <section id="pedidos" class="section">
      <!-- Área de Seleção de Produtos -->
      <div class="card">
        <h2>🍔 Cardápio - Selecione os Produtos</h2>
        
        <div class="loading" id="loadingCardapio">
          <div class="spinner"></div>
          Carregando cardápio...
        </div>

        <div id="cardapioGrid" class="cardapio-grid">
          <!-- Produtos serão carregados aqui via JS -->
        </div>
      </div>

      <!-- Carrinho de Pedido -->
      <div class="card">
        <h2>🛒 Carrinho do Pedido</h2>
        
        <div class="carrinho-header">
          <div class="form-grid" style="margin-bottom: 1rem;">
            <div class="form-group">
              <label>Mesa *</label>
              <select id="carrinhoMesa" required>
                <option value="">Selecione a mesa...</option>
              </select>
            </div>
            <div class="form-group">
              <label>Atendente *</label>
              <select id="carrinhoAtendente" required>
                <option value="">Selecione o atendente...</option>
              </select>
            </div>
          </div>
        </div>

        <div id="carrinhoItens" class="carrinho-itens">
          <div class="empty-state">
            <div class="empty-state-icon">🛒</div>
            <p>Carrinho vazio. Adicione produtos do cardápio acima.</p>
          </div>
        </div>

        <div class="carrinho-total">
          <div class="total-info">
            <span class="total-label">Total do Pedido:</span>
            <span class="total-valor" id="carrinhoTotal">R$ 0,00</span>
          </div>
          <div class="btn-group">
            <button class="btn btn-danger" onclick="limparCarrinho()">🗑️ Limpar Carrinho</button>
            <button class="btn btn-success" onclick="finalizarPedido()">✅ Finalizar Pedido</button>
          </div>
        </div>
      </div>

      <!-- Lista de Pedidos Realizados -->
      <div class="card">
        <h2>📋 Pedidos Realizados</h2>
        
        <div class="btn-group">
          <button class="btn btn-secondary" onclick="loadPedidos()">🔄 Atualizar Lista</button>
        </div>

        <div class="loading" id="loadingPedidos">
          <div class="spinner"></div>
          Carregando pedidos...
        </div>

        <div class="table-container">
          <table id="pedidoTable">
            <thead>
              <tr>
                <th>ID</th>
                <th>Data/Hora</th>
                <th>Mesa</th>
                <th>Atendente</th>
                <th>Status</th>
                <th>Pagamento</th>
                <th>Total</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody id="pedidoTableBody">
              <!-- Dados carregados via JS -->
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Vendas Section -->
    <section id="vendas" class="section">
      <div class="card">
        <h2>💰 Gerenciamento de Vendas</h2>
        
        <div class="btn-group">
          <button class="btn btn-primary" onclick="openVendaModal()">➕ Nova Venda</button>
          <button class="btn btn-secondary" onclick="loadVendas()">🔄 Atualizar Lista</button>
        </div>

        <div class="loading" id="loadingVendas">
          <div class="spinner"></div>
          Carregando vendas...
        </div>

        <div class="table-container">
          <table id="vendaTable">
            <thead>
              <tr>
                <th>ID</th>
                <th>Data/Hora</th>
                <th>ID Pedido</th>
                <th>Valor Total</th>
                <th>Forma de Pagamento</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody id="vendaTableBody">
              <!-- Dados carregados via JS -->
            </tbody>
          </table>
        </div>
      </div>
    </section>
  </div>

  <!-- Modal Atendente -->
  <div id="atendenteModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="atendenteModalTitle">Novo Atendente</h3>
        <button class="close-modal" onclick="closeModal('atendenteModal')">&times;</button>
      </div>
      <form id="atendenteForm">
        <input type="hidden" id="atendenteId">
        <div class="form-grid">
          <div class="form-group">
            <label>Nome *</label>
            <input type="text" id="atendenteNome" required>
          </div>
          <div class="form-group">
            <label>CPF *</label>
            <input type="text" id="atendenteCpf" maxlength="11" required>
          </div>
          <div class="form-group">
            <label>Telefone</label>
            <input type="text" id="atendenteTelefone">
          </div>
          <div class="form-group">
            <label>Login *</label>
            <input type="text" id="atendenteLogin" required>
          </div>
          <div class="form-group">
            <label>Senha *</label>
            <input type="password" id="atendenteSenha" required>
          </div>
          <div class="form-group">
            <label>Tipo de Usuário *</label>
            <select id="atendenteTipo" required>
              <option value="atendente">Atendente</option>
              <option value="gerente">Gerente</option>
            </select>
          </div>
        </div>
        <div class="btn-group">
          <button type="submit" class="btn btn-primary">💾 Salvar</button>
          <button type="button" class="btn btn-secondary" onclick="closeModal('atendenteModal')">❌ Cancelar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal Produto -->
  <div id="produtoModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="produtoModalTitle">Novo Produto</h3>
        <button class="close-modal" onclick="closeModal('produtoModal')">&times;</button>
      </div>
      <form id="produtoForm">
        <input type="hidden" id="produtoId">
        <div class="form-grid">
          <div class="form-group">
            <label>Nome *</label>
            <input type="text" id="produtoNome" required>
          </div>
          <div class="form-group">
            <label>Categoria</label>
            <input type="text" id="produtoCategoria">
          </div>
          <div class="form-group">
            <label>Preço *</label>
            <input type="number" id="produtoPreco" step="0.01" min="0" required>
          </div>
          <div class="form-group">
            <label>Quantidade em Estoque</label>
            <input type="number" id="produtoEstoque" min="0" value="0">
          </div>
          <div class="form-group">
            <label>Status *</label>
            <select id="produtoStatus" required>
              <option value="ativo">Ativo</option>
              <option value="inativo">Inativo</option>
            </select>
          </div>
          <div class="form-group">
            <label>Foto (URL)</label>
            <input type="text" id="produtoFoto">
          </div>
        </div>
        <div class="form-group">
          <label>Descrição</label>
          <textarea id="produtoDescricao"></textarea>
        </div>
        <div class="btn-group">
          <button type="submit" class="btn btn-primary">💾 Salvar</button>
          <button type="button" class="btn btn-secondary" onclick="closeModal('produtoModal')">❌ Cancelar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal Mesa -->
  <div id="mesaModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="mesaModalTitle">Nova Mesa</h3>
        <button class="close-modal" onclick="closeModal('mesaModal')">&times;</button>
      </div>
      <form id="mesaForm">
        <input type="hidden" id="mesaId">
        <div class="form-grid">
          <div class="form-group">
            <label>Número da Mesa *</label>
            <input type="number" id="mesaNumero" min="1" required>
          </div>
          <div class="form-group">
            <label>Status *</label>
            <select id="mesaStatus" required>
              <option value="livre">Livre</option>
              <option value="ocupada">Ocupada</option>
            </select>
          </div>
        </div>
        <div class="btn-group">
          <button type="submit" class="btn btn-primary">💾 Salvar</button>
          <button type="button" class="btn btn-secondary" onclick="closeModal('mesaModal')">❌ Cancelar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal Pedido -->
  <div id="pedidoModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="pedidoModalTitle">Novo Pedido</h3>
        <button class="close-modal" onclick="closeModal('pedidoModal')">&times;</button>
      </div>
      <form id="pedidoForm">
        <input type="hidden" id="pedidoId">
        <div class="form-grid">
          <div class="form-group">
            <label>Mesa *</label>
            <select id="pedidoMesa" required>
              <option value="">Selecione...</option>
            </select>
          </div>
          <div class="form-group">
            <label>Atendente *</label>
            <select id="pedidoAtendente" required>
              <option value="">Selecione...</option>
            </select>
          </div>
          <div class="form-group">
            <label>Status *</label>
            <select id="pedidoStatus" required>
              <option value="aberto">Aberto</option>
              <option value="finalizado">Finalizado</option>
              <option value="pago">Pago</option>
            </select>
          </div>
          <div class="form-group">
            <label>Forma de Pagamento</label>
            <select id="pedidoPagamento">
              <option value="">Selecione...</option>
              <option value="pix">PIX</option>
              <option value="credito">Crédito</option>
              <option value="debito">Débito</option>
              <option value="dinheiro">Dinheiro</option>
              <option value="mix">Mix</option>
            </select>
          </div>
          <div class="form-group">
            <label>Total (R$)</label>
            <input type="number" id="pedidoTotal" step="0.01" min="0" value="0">
          </div>
        </div>
        <div class="form-group">
          <label>Observações</label>
          <textarea id="pedidoObservacoes"></textarea>
        </div>
        <div class="btn-group">
          <button type="submit" class="btn btn-primary">💾 Salvar</button>
          <button type="button" class="btn btn-secondary" onclick="closeModal('pedidoModal')">❌ Cancelar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal Venda -->
  <div id="vendaModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="vendaModalTitle">Nova Venda</h3>
        <button class="close-modal" onclick="closeModal('vendaModal')">&times;</button>
      </div>
      <form id="vendaForm">
        <input type="hidden" id="vendaId">
        <div class="form-grid">
          <div class="form-group">
            <label>Pedido *</label>
            <select id="vendaPedido" required>
              <option value="">Selecione...</option>
            </select>
          </div>
          <div class="form-group">
            <label>Forma de Pagamento *</label>
            <select id="vendaPagamento" required>
              <option value="">Selecione...</option>
              <option value="pix">PIX</option>
              <option value="credito">Crédito</option>
              <option value="debito">Débito</option>
              <option value="dinheiro">Dinheiro</option>
              <option value="mix">Mix</option>
            </select>
          </div>
          <div class="form-group">
            <label>Valor Total (R$) *</label>
            <input type="number" id="vendaValor" step="0.01" min="0" required>
          </div>
        </div>
        <div class="btn-group">
          <button type="submit" class="btn btn-primary">💾 Salvar</button>
          <button type="button" class="btn btn-secondary" onclick="closeModal('vendaModal')">❌ Cancelar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Scripts -->
  <script src="app.js"></script>
</body>
</html>
